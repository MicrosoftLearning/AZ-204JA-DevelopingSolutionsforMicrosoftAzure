---
lab:
    title: 'ラボ: Azure Functions を使用してタスク処理ロジックを実装する'
    az204Module: 'モジュール 02: Azure Functions の実装'
    az020Module: 'モジュール 02: Azure Functions の実装'
    type: 'Answer Key'
---

# ラボ: Azure Functions を使用してタスク処理ロジックを実装する
# 学生課題解答キー

## Microsoft Azure ユーザー インターフェイス

Microsoft クラウド ツールのダイナミックな特性を考えると、このトレーニング コンテンツの開発後に Azure ユーザー インターフェイスの変更が発生する可能性があります。これらの変更により、ラボの指示と手順が一致しない場合があります。

Microsoft では、コミュニティから必要な変更要望を受けたときにトレーニング コースを更新します。ただし、クラウドの更新は頻繁に行われるため、トレーニング コンテンツの更新前に UI が変更される場合もあります。**その場合は、変更に適宜対応して、ラボで要求されている内容を処理してください**。

## 指示

### 開始する前に

#### ラボ仮想マシンへのログイン

次の認証情報を使用して、Windows 10 仮想マシン (VM) にログインします。
    
-   ユーザー名: **管理者**

-   パスワード: **Pa55w.rd**

> **注**: 仮想ラボ環境に接続する手順は講師が説明します。

#### インストールされたアプリケーションのレビュー

Windows 10 デスクトップでタスク バーを探します。タスク バーには、この課題で使用するアプリケーションのアイコンが含まれています:
    
-   Microsoft Edge

-   File Explorer

-   Windows ターミナル

### 演習 1: Azure リソースの作成

#### タスク 1: Azure portal を開く

1.  タスク バーで、「**Microsoft Edge**」 アイコンを選択します。

1.  開いているブラウザー ウィンドウで、「Azure portal」(<https://portal.azure.com>)に移動します。

1.  Microsoft アカウントの電子メール アドレスを入力し、 **「次へ」**を選択します。

1.  Microsoft アカウントのパスワードを入力し、**「サインイン」**を選択します。

    > **注**: Azure portal に初めてログインする場合は、ポータルのツアーが表示されます。ツアーをスキップしてポータルの使用を開始するには、「**開始**」 を選択します。

#### タスク 2: Azure ストレージ アカウントの作成

1.  Azure portal のナビゲーション ペインで、「**すべてのサービス**」 を選択します。

1.  「**すべてのサービス**」 ブレードで、「**ストレージ アカウント**」 を選択します。

1.  「**ストレージア カウント**」 ブレードで、ストレージ アカウントの一覧を表示します。

1.  「**ストレージ アカウント**」 ブレードで、「**追加**」 を選択します。

1.  「**ストレージ アカウントを作成**」 ブレードで、「**基本**」、「**タグ**」、「**レビュー + 作成**」 などのブレード上のタブを確認します。

    > **注**: 各タブは、新しいストレージ アカウントを作成するための、ワークフロー内のステップを表しています。いつでも 「**確認および作成**」 を選択して、残りのタブをスキップできます。

1.  **基本** タブを選択し、タブ領域で次の操作を実行します。
    
    1.  「**サブスクリプション**」 テキスト ボックスは既定値のままにします。
    
    1.  「**リソース グループ**」 セクションで、「**新規作成**」 を選択して、「**Serverless**」を入力し、「**OK**」 を選択します。
    
    1.  「**ストレージ アカウント名**」 テキスト ボックスに 「**funcstor*[yourname]***」 と入力します。
    
    1.  「**場所**」 リストで、「**(米国) 米国東部**」 リージョンを選択します。
    
    1.  「**パフォーマンス** 」 セクションで、「**標準**」 を選択します。
    
    1.  「**アカウントの種類**」 一覧で、「**StorageV2 (general purpose v2)**」 を選択します。
    
    1.  「**レプリケーション**」 リストで、「**ローカル冗長ストレージ (LRS)**」 を選択します。
    
    1.  「**アクセス層 (既定)**」 セクションで、「**ホット**」 が選択されていることを確認します。
    
    1.  「**レビュー + 作成**」 を選択します。

1.  **確認および作成**タブで、以前の手順で指定したオプションを確認します。

1.  指定した構成を使用してストレージ アカウントを作成するには、「**作成**」 を選択します。

    > **注**: 「**デプロイ**」 ブレードで、このラボを進める前に作成タスクが完了するのを待ちます。

#### タスク 3: Azure Functions アプリの作成

1.  Azure portal のナビゲーション ペインで、「**リソースを作成**」 リンクを選択します。

1.  **「新規」** ブレードで、**「Marketplace を検索」** というテキスト ボックスを探します。

1.  検索テキスト ボックスに「**関数**」と入力し、Enter を押します。

1.  **すべて** の検索結果ブレードで、 **関数アプリ**の結果を選択します。

1.  **Function App** ブレードで、「**作成**」 を選択します。

1.  「**関数アプリ**」 ブレードで、「**基本**」 などのタブを検索します。

    > **注**: 各タブは、新しい関数アプリを作成するワークフローのステップを表しています。いつでも 「**確認および作成**」 を選択して、残りのタブをスキップできます。

1.  「**基本**」 タブで、次の操作を実行します。
    
    1.  「**サブスクリプション**」 テキスト ボックスは既定値のままにします。
    
    1.  「**リソースグループ**」 セクションで、「**既存のものを使用**」 を選択し、リスト上から 「**サーバーレス**」 を選択します。
    
    1.  「**関数アプリ名**」 テキスト ボックスに、「**funclogic*[yourname]***」 と入力します。

    1.  「**発行**」 セクションで、「**コード**」 を選択します。

    1.  「**ランタイム スタック**」 ドロップダウン リストで、「**.NET Core**」 を選択します。

    1.  「**バージョン**」 ドロップダウン リストで、「**3.1**」 を選択します。

    1.  「**リージョン**」 ドロップダウン リストで、「**米国東部**」 リージョンを選択します。
    
    1.  「**次へ: ホスティング**」 を選択します。

1.  「**ホスティング**」 タブで、次の操作を実行します。

    1.  「**ストレージ アカウント**」 ドロップダウンリストで、 このラボで前に作成したストレージ アカウント **funcstor*[yourname]*** を選択します。

    1.  「**オペレーティング システム**」 セクションで、「**Windows**」 を選択します。

    1.  「**プランの種類**」 ドロップダウン リストで、「**従量課金プラン**」 オプションを選択します。

    1.  「**Review + create**」 を選択します。

1.  「**レビュー + 作成**」 タブで、前の手順で選択したオプションをレビューします。

1.  「**作成**」 を選択し、指定した構成を使用して関数アプリを作成します。 

    > **注**: このラボを進める前に、作成タスクが完了するまで待ちます。

#### レビュー

このラボでは、このラボで使用するすべてのリソースを作成しました。

### 演習 2: HTTP 要求によってトリガーされる関数の作成

#### タスク 1: HTTP によってトリガーされる関数を作成する

1.  Azure portal のナビゲーション ペインで、「**リソース グループ**」 リンクを選択します。

1.  「**リソース グループ**」 ブレードで、 この課題で前に作成した 「**サーバーレス**」 リソースグループを検索して選択します。

1.  「**Serverless**」 ブレードで、このラボで前に作成した関数アプリ **funclogic*[yourname]*** を選択します。

1.  「**App Service**」 ブレードで、「**関数**」 セクションから 「**関数**」 オプションを選択ます。

1. 「**関数**」 ペインで、「**追加**」 ボタンを選択します。

1.  「**新しい関数**」 ポップアップ ダイアログで、次のアクションを実行します。
    
    1.  「**テンプレート**」 タブで、「**HTTP トリガー**」 を選択します。   

    1.  「**詳細**」 タブ内で、「**新しい関数**」 テキスト ボックスを見つけてから、「**エコー**」と入力します。

    1.  「**詳細**」 タブで、「**承認**」 テキスト ボックスを見つけてから、「**匿名**」 を選択します。     

    1.  「**関数の作成**」 を選択します。

#### タスク 2: 書き込みコードの記述

1.  「**関数**」 ブレードで、「**開発者**」 セクションから 「**コード + テスト**」 オプションを選択します。     

1.  関数エディターで、関数スクリプト **run.csx** のサンプルを確認します。

    ```
    #r "Newtonsoft.Json"

    using System.Net;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.Extensions.Primitives;
    using Newtonsoft.Json;

    public static async Task<IActionResult> Run(HttpRequest req, ILogger log)
    {
        log.LogInformation("C# HTTP trigger function processed a request.");

        string name = req.Query["name"];

        string requestBody = await new StreamReader(req.Body).ReadToEndAsync();
        dynamic data = JsonConvert.DeserializeObject(requestBody);
        name = name ?? data?.name;

        string responseMessage = string.IsNullOrEmpty(name)
            ? "This HTTP triggered function executed successfully. Pass a name in the query string or in the request body for a personalized response."
                    : $"Hello, {name}. This HTTP triggered function executed successfully.";

                return new OkObjectResult(responseMessage);
    }
    ```

1.  サンプル コードをすべて削除します。

1.  次のコード行を追加して、名前空間 **Microsoft.AspNetCore.Mvc** をインポートします。

    ```
    using Microsoft.AspNetCore.Mvc;
    ```

1.  次のコード行を追加して、名前空間 **System.Net** をインポートします。

    ```
    using System.Net;
    ```

1.  次のコードブロックを追加して 「**Run**」 という名前の新しい **public static** メソッドを作成します。このメソッドは 、タイプ **IActionResult** の変数を返し、タイプ **HttpRequest** および **ILogger** の変数を、*req* および *log* という名前のパラメーターとして受け取ります。

    ```
    public static IActionResult Run(HttpRequest req, ILogger log)
    {
    }
    ```

1.  **Run** メソッドで次のコード行を入力して、固定メッセージをレンダリングします。

    ```
    log.LogInformation("Received a request");
    ```

1.  次のコード行を入力して、HTTP リクエストのボディを HTTP レスポンスとして出力します。

    ```
    return new OkObjectResult(req.Body);
    ```

1.  「**run.csx**」 ファイルを確認します。 以下が含まれているはずです。

    ```
    using System.Net;
    using Microsoft.AspNetCore.Mvc;

    public static IActionResult Run(HttpRequest req, ILogger log)
    {
        log.LogInformation("Received a request");

        return new OkObjectResult(req.Body);
    }
    ```

1.  「**保存**」 を選択して、関数コードに対する変更を保持します。 

#### タスク 3: ポータルで関数実行をテストする

1.  「**テスト/実行**」 を選択します。

1.  表示されるポップアップ ダイアログで、次の操作を実行します。

    1.  「**入力**」 タブの 「**本文**」 テキスト ボックスに、次の JSON 要求本文を入力します。   

        ```
        {
            "message": "Hello, World!"
        }
        ```

    1.  「**入力**」 タブで、「**実行**」 を選択します。

    1.  「**出力**」 タブで、テスト実行の結果を確認します。結果は、元の要求本文を正確にエコーする必要があります。

#### タスク 4: 基本関数の URL の取得

1.  Azure portal のナビゲーション ペインで、「**リソース グループ**」 リンクを選択します。

1.  「**リソース グループ**」 ブレードで、 この課題で前に作成した 「**サーバーレス**」 リソースグループを検索して選択します。

1.  「**Serverless**」 ブレードで、このラボで前に作成した関数アプリ **funclogic*[yourname]*** を選択します。

1.  「**App Service**」 ブレードで、「**URL**」 テキスト ボックスの値をコピーします。この値は、このラボの後半で使用します。

#### タスク 5: httprepl を使用して関数の実行をテストする

1.  タスク バーで、**Windows Terminal** アイコンを選択します。

1.  コマンド プロンプトで次のコマンドを入力して **httprepl** ツールを起動し、この課題で前にコピーした URL の値をベース URI (Uniform Resource Identifier) として設定します。

    ```
    httprepl <function-app-url>
    ```

    > **注**: 例えば、URL が **https://funclogicstudent.azurewebsites.net** の場合、コマンドは **httprepl https://funclogicstudent.azurewebsites.net** になります。

1.  httprepl tool に表示されるエラー メッセージを監視します。このメッセージが発生するのは、ツールが API の「スキャン」に使用する Swagger 定義ファイルを検索しているためです。ロジック アプリは Swagger 定義ファイルを生成しないため、API を手動でスキャンする必要があります。

1.  ツール プロンプトで次のコマンドを入力し、Enterを選択すると、対応する **API** ディレクトリを参照します。

    ```
    cd api
    ```

1.  次のコマンドを入力し、Enter キーを押して、対応する **echo** ディレクトリを参照します。

    ```
    cd echo
    ```

1.  次のコマンドを入力してから、**\-\-content** オプションを使用して数値 **3** を設定した HTTP 要求本文を送る **post** コマンドを実行するために Enter を選択します。

    ```
    post --content 3
    ```

1.  次のコマンドを入力してから、**\-\-content** オプションを使用して数値 **5** を設定した HTTP 要求本文を送る **post** コマンドを実行するために Enter を選択します。

    ```
    post --content 5
    ```

1.  次のコマンドを入力してから、**\-\-content** オプションを使用して文字列値 **Hello** を設定した HTTP 要求本文を送る **post** コマンドを実行するために Enter を選択します。

    ```
    post --content "Hello"
    ```

1.  次のコマンドを入力してから、 **\-\-content** オプションを使用して JavaScript Object Notation (JSON) 値 **{"msg": "Successful"}** を設定した HTTP 要求本文を送る **post** コマンドを実行するためにEnter を選択します。

    ```
    post --content "{"msg": "Successful"}"
    ```

1.  次のコマンドを入力してから、Enter を選択して **httprepl** アプリケーションを終了します。

    ```
    exit
    ```

1.  現在実行中の Windows Terminal アプリケーションを閉じます。

1.	Azure portal が表示されているブラウザー ウインドウに戻ります。

#### レビュー

この演習では、HTTP POST 要求を介して送信されたコンテンツをエコーする基本的な関数を作成しました。

### エクササイズ3：スケジュールに基づいてトリガーする関数の作成

#### タスク 1: スケジュールでトリガーする関数の作成

1.  Azure portal のナビゲーション ペインで、「**リソース グループ**」 リンクを選択します。

1.  「**リソース グループ**」 ブレードで、 この課題で前に作成した 「**サーバーレス**」 リソースグループを検索して選択します。

1.  「**Serverless**」 ブレードで、このラボで前に作成した関数アプリ **funclogic*[yourname]*** を選択します。

1.  「**App Service**」 ブレードで、「**関数**」 セクションから 「**関数**」 オプションを選択ます。

1. 「**関数**」 ペインで、「**追加**」 ボタンを選択します。

1.  「**新しい関数**」 ポップアップ ダイアログで、次のアクションを実行します。
    
    1.  「**テンプレート**」 タブで、「**タイマー トリガー**」 を選択します。

    1.  「**詳細**」 タブ内で、「**新しい関数**」 テキストボックスを見つけてから、「**定期**」と入力します。

    1.  「**詳細**」 タブで、「**スケジュール**」 テキスト ボックスを見つけてから、「**0 \*/2 \* \* \* \***」 と入力します。   

    1.  「**詳細**」 タブで、「**承認**」 テキスト ボックスを見つけてから、「**匿名**」 を選択します。     

    1.  「**関数の作成**」 を選択します。

#### タスク 2: 関数の実行を確認する

1.  「**関数**」 ブレードで、「**開発者**」 セクションから 「**コード + テスト**」 オプションを選択します。     

1.  関数エディターで、「**ログ**」 を選択します。

1.  約 2 分ごとに行われる関数の実行を確認します。各関数の実行は、ログに単純なメッセージを書き込む必要があります。

#### タスク 3: 関数の統合構成を更新する

1.  「**関数**」ブレードで、「**開発者**」 セクションから 「**インテグレーション**」 オプションを選択します。     

1.  「**統合**」 ペインで 、「**タイマー**」 トリガーを選択します。

1.  「**トリガーの編集**」 ポップアップで、次の操作を実行します。

    1.  「**スケジュール**」 テキスト ボックスで、値を **\*/30 \* \* \* \* \*** に変更します。

    1.  「**保存**」 を選択します。

#### タスク 4: 関数の実行を確認する

1.  「**関数**」 ブレードで、「**開発者**」 セクションから 「**コード + テスト**」 オプションを選択します。     

1.  関数エディターで、「**ログ**」 を選択します。

1.  約 30 秒ごとに実行される関数の実行を監視します。各関数の実行は、ログに単純なメッセージを書き込む必要があります。

#### レビュー

この演習では、固定スケジュールに基づいて自動的に実行される関数を作成しました。

### 演習 4: 他のサービスと統合する関数を作成する

#### タスク 1: HTTP によってトリガーされる関数を作成する

1.  Azure portal のナビゲーション ペインで、「**リソース グループ**」 リンクを選択します。

1.  「**リソース グループ**」 ブレードで、 この課題で前に作成した 「**サーバーレス**」 リソースグループを検索して選択します。

1.  「**Serverless**」 ブレードで、このラボで前に作成した関数アプリ **funclogic*[yourname]*** を選択します。

1.  「**App Service**」 ブレードで、「**関数**」 セクションから 「**関数**」 オプションを選択ます。

1. 「**関数**」 ペインで、「**+ 追加**」 ボタンを選択します。

1.  「**新しい関数**」 ポップアップ ダイアログで、次のアクションを実行します。
    
    1.  「**テンプレート**」 タブで、「**HTTP トリガー**」 を選択します。   

    1.  「**詳細**」 タブ内で、「**新しい関数**」 テキスト ボックスを見つけてから、「**GetSettingInfo**」と入力します。

    1.  「**詳細**」 タブで、「**承認**」 テキスト ボックスを見つけてから、「**匿名**」 を選択します。     

    1.  「**関数の作成**」 を選択します。

#### タスク 2: サンプル コンテンツをアップロードする

1.  Azure portal のナビゲーション ペインで、「**リソース グループ**」 リンクを選択します。

1.  「**リソース グループ**」 ブレードで、 この課題で前に作成した 「**サーバーレス**」 リソースグループを検索して選択します。

1.  「**サーバーレス**」 ブレードで、 このラボで前に作成したストレージ アカウント **funcstor*[yourname]*** を選択します。

1.  「**ストレージ アカウント**」 ブレードで、「**Blob サービス**」 セクションにある 「**コンテナー**」 を選択します。

1.  「**Containers**」 セクションで、「**コンテナー**」 を選択します。

1.  「**新規コンテナー**」 ポップアップ ウィンドウで、次の操作を実行します。
    
    1.  「**名前**」 テキストボックスに、「**content**」を入力します。
    
    1.  「**パブリック アクセス レベル**」 ドロップダウン リストで、「**プライベート (匿名アクセスなし)**」 を選択します。
    
    1.  「**OK**」 を選択します。

1.  「**コンテナ―**」 セクションに戻り、新しく作成した **コンテンツ** コンテナーを選択します。

1.	「**コンテナー**」 ブレードで、「**アップロード**」 を選択します。

1.	「**BLOB をアップロード**」 ウィンドウで、次の操作を実行します。

    1.  「**ファイル**」 セクションで、「**フォルダー**」 アイコンを選択します。

    1.  「**ファイルエクスプローラー**」 ウィンドウで、「**すべてのファイル (F):\\Allfiles\\Labs\\02\\Starter**」 を参照し、**settings.json** ファイルを選択して 「**開く**」 をクリックします。

    1.  **「ファイルが既に存在する場合は上書きする」** チェックボックスがオンにチェックされていることを確認し、**「アップロード」** を選択します。 
    
    > **注**: この演習を続行する前に、BLOB がアップロードされるのを待ちます。

#### タスク 3: HTTP トリガー関数を構成する

1.  Azure portal のナビゲーション ペインで、「**リソース グループ**」 リンクを選択します。

1.  「**リソース グループ**」 ブレードで、 この課題で前に作成した 「**サーバーレス**」 リソースグループを検索して選択します。

1.  「**Serverless**」 ブレードで、このラボで前に作成した関数アプリ **funclogic*[yourname]*** を選択します。

1.  「**App Service**」 ブレードで、「**関数**」 セクションから 「**関数**」 オプションを選択ます。

1.  「**関数**」 ペインで、既存の **GetSettingInfo** 関数を選択して、関数のエディターを開きます。

1.  「**関数**」ブレードで、「**開発者**」 セクションから 「**インテグレーション**」 オプションを選択します。     

1.  「**統合**」 ペインで 、「**入力の追加**」 を選択します。   

1.  「**入力の作成**」 ポップアップ ダイアログで、次の操作を実行します。

    1.  「**バインドの種類**」 リストで、「**Azure Blog Storage**」 を選択します。

    1.  「**BLOB パラメーター名**」 ボックスに、値 「**json**」 を入力します。

    1.  「**パス**」 テキストボックスに、値 「**content/settings.json**」 を入力します。

    1.  「**ストレージ アカウント接続**」 リストで、「**AzureWebJobsStorage**」 を選択します。

    1.  「**OK**」 を選択します。

1.  「**統合**」 ペインに戻り、「**HTTP**」 トリガーを選択します。

1.  「**トリガーの編集**」 ポップアップ ダイアログで、次の操作を実行します。

    1.  「**Request パラメーター名**」 ボックスに、値 「**request**」を入力します。

    1.  「**選択した HTTP メソッド**」 チェック ボックス グループで 、「**GET**」 オプションだけが選択されていることを確認します。

    1.  「**保存**」 を選択します。

#### タスク 4: 書き込みコードの記述

1.  「**関数**」 ブレードで、「**開発者**」 セクションから 「**コード + テスト**」 オプションを選択します。     

1.  関数エディターで、関数スクリプト **run.csx** のサンプルを確認します。

    ```
    #r "Newtonsoft.Json"

    using System.Net;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.Extensions.Primitives;
    using Newtonsoft.Json;

    public static async Task<IActionResult> Run(HttpRequest req, ILogger log)
    {
        log.LogInformation("C# HTTP trigger function processed a request.");

        string name = req.Query["name"];

        string requestBody = await new StreamReader(req.Body).ReadToEndAsync();
        dynamic data = JsonConvert.DeserializeObject(requestBody);
        name = name ?? data?.name;

        string responseMessage = string.IsNullOrEmpty(name)
            ? "This HTTP triggered function executed successfully. Pass a name in the query string or in the request body for a personalized response."
                    : $"Hello, {name}. This HTTP triggered function executed successfully.";

                return new OkObjectResult(responseMessage);
    }
    ```

1.  サンプル コードをすべて**削除**します。

1.  次のコード行を追加して、名前空間 **Microsoft.AspNetCore.Mvc** をインポートします。

    ```
    using Microsoft.AspNetCore.Mvc;
    ```

1.  次のコード行を追加して、名前空間 **System.Net** をインポートします。

    ```
    using System.Net;
    ```

1.  次のコードブロックを追加して、**Run** という名前の新しい**静的なパブリック** メソッドを作成します。このメソッドは 、**IActionResult** 型の変数を返し、**HttpRequest** 型や **string** 型の変数を *request* や *json* という名前のパラメーターとして受け取ります。

    ```
    public static IActionResult Run(HttpRequest request, string json)
    {
    }
    ```

1.  「**Run**」 メソッドで、「*json*」 パラメーターの内容を関数の HTTP レスポンスとして返すために次のコード行を入力します。

    ```
    return new OkObjectResult(json);
    ```

1.  「**run.csx**」 ファイルを確認します。 以下が含まれているはずです。

    ```
    using Microsoft.AspNetCore.Mvc;
    using System.Net;

    public static IActionResult Run(HttpRequest request, string json)
    {
        return new OkObjectResult(json);
    }
    ```

1.  「**保存**」 を選択して、関数コードに対する変更を保持します。 

#### タスク 5: 関数実行のテスト

1.  タスク バーで、**Windows Terminal** アイコンを選択します。

1.  開いたコマンドプロンプトで次のコマンドを入力し、Enter キーを選択して、ベース URI をこの課題で前にコピーした URL の値に設定する **httprepl** ツールを起動します。

    ```
    httprepl <function-app-url>
    ```

    > **注**: 例えば、URL が **https://funclogicstudent.azurewebsites.net** の場合、コマンドは **httprepl https://funclogicstudent.azurewebsites.net** になります。

1.  ツールプロンプトで次のコマンドを入力してから、Enter を選択して対応する **api** エンドポイントを参照します。

    ```
    cd api
    ```

1.  次のコマンドを入力して、対応する **getsettinginfo** エンドポイントを参照します。

    ```
    cd getsettinginfo
    ```

1.  次のコマンドを入力し、現在のエンドポイントで **get** コマンドを実行します。

    ```
    get
    ```

1.  関数アプリからのレスポンスに含まれる JSON コンテンツを確認します。関数アプリには次の内容が含まれています。

    ```
    {
        "version": "0.2.4",
        "root": "/usr/libexec/mews_principal/",
        "device": {
            "id": "21e46d2b2b926cba031a23c6919"
        },
        "notifications": {
            "email": "Anais85@outlook.com",
            "phone": "751.757.2014 x4151"
        }
    }
    ```

1.  次のコマンドを入力してから、Enter を選択して **httprepl** アプリケーションを終了します。

    ```
    exit
    ```

1.  現在実行中の Windows Terminal アプリケーションを閉じます。

1.	Azure portal が表示されているブラウザー ウインドウに戻ります。

#### レビュー

このエクササイズでは、ストレージ内の JSON ファイルの内容を返す関数を作成しました。

### エクササイズ 5: サブスクリプションのクリーンアップ 

#### タスク 1: Azure Cloud Shell を開き、リソース グループを一覧表示する

1.  Azure portal のナビゲーション ウィンドウで、**Cloud Shell** アイコンを選択して新しいシェル インスタンスを開きます。

    > **注**: **Cloud Shell** アイコンは、署名 (\>) アンダースコア文字 (\_) より大きく表されます。

1.  サブスクリプションを使用して Cloud Shell を初めて開く場合は、**Azure Cloud Shell へようこそウィザード**を使って、初めて使用する Cloud Shell を構成できます。ウィザードで次の操作を実行します。
    
    1.  シェルを使用して開始する新しいストレージ アカウントを作成するよう求めるダイアログ ボックスが表示されます。既定の設定を受け入れ、「**ストレージの作成**」 を選択します。 

    > **注**: Cloud Shell が初回のセットアップ手順を完了するのを待ってから、ラボを進めます。Cloud Shellの構成オプションが通知されない場合は、このコースのラボで既存のサブスクリプションを使用している可能性が高いと考えられます。新しいサブスクリプションを使用しているという前提で課題を記述します。

#### タスク 2: リソース グループの削除

1.  コマンド プロンプトで次のコマンドを入力し、リソース グループ 「**サーバーレス**」 を削除します。

    ```
    az group delete --name Serverless --no-wait --yes
    ```
    
1.  ポータルの Cloud Shell ペインを閉じます。

#### タスク 3: アクティブなアプリケーションを閉じる

1.     現在実行中の Microsoft Edge アプリケーションを閉じます。

#### レビュー

この実習では、この演習で使用したリソース グループを削除してサブスクリプションをクリーンアップしました。